<!DOCTYPE html> 
<html><head>
<title>videojs</title><meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link type="text/css" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/video.js/6.5.1/video-js.min.css"/>
<link type="text/css" rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css" />
<script type="text/javascript" src="//code.jquery.com/jquery-1.12.4.min.js"></script>
<script>//window.VIDEOJS_NO_DYNAMIC_STYLE = true;</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/video.js/6.5.1/video.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/videojs-youtube/2.4.1/Youtube.min.js"></script>
<!--script src="videojs-offset.js"></script-->
<script src="//cdn.sc.gl/videojs-hotkeys/latest/videojs.hotkeys.min.js"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
<script type="text/javascript">
var gplayer,gplayerId;
var gjpList = [
	 {type:"video/webm"    ,title:"ocean"		,src:"https://vjs.zencdn.net/v/oceans.webm"							}
	,{type:"video/mp4"     ,title:"twitter"     ,src:"http://podcast.rickygervais.com/rickyandpepe_twitter.mp4"		}
	,{type:"video/mp4"     ,title:"flower"      ,src:"http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_60fps_normal.mp4"		}
	,{type:"video/mp4"     ,title:"game"        ,src:"http://assets3.ign.com/videos/zencoder/2016/06/15/640/7080c56a76e2b74ec8ecfe4c224441d4-500000-1466028542-w.mp4"		}
	,{type:"video/youtube" ,title:"yt"		           ,src:"iz73t1pdtno"  }
	,{type:"video/youtube" ,title:"yt-120"  ,jump:120  ,src:"iz73t1pdtno"  }
	,{type:"video/youtube" ,title:"yt-240"  ,jump:240  ,src:"iz73t1pdtno"  }
	,{type:"video/youtube" ,title:"yt-1400"	,jump:1400 ,src:"iz73t1pdtno"  }
	
	,{type:"video/youtube" ,title:"yt-se1"	,start:1400 ,end:1405 ,src:"iz73t1pdtno"  }
	,{type:"video/youtube" ,title:"yt-se2"	,start:1000 ,end:1005 ,src:"iz73t1pdtno"  }

,{"title":"fra s8A2L++","start":5661,"end":5683,"src":"OJo-hcmsKvg"}
,{"title":"fra s8D5R++","start":1696,"end":1729,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":3245,"end":3409,"title":"fra l7A2R+d"}
,{"title":"smr lqD2R+","start":2797,"end":2834,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":5711,"end":5740,"title":"fra koA2L++@"}
,{"title":"fra l5D2R+d@","start":524,"end":613,"src":"OJo-hcmsKvg"}
,{"title":"smr l5A5R+","start":1427,"end":1488,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":1980,"end":2012,"title":"smr s8D2C+@"}
,{"src":"OJo-hcmsKvg","start":2137,"end":2167,"title":"fra koA5R-"}
,{"title":"smr s8D5L+","start":2899,"end":2981,"src":"OJo-hcmsKvg"}
,{"title":"smr koA5L+","start":1101,"end":1114,"src":"OJo-hcmsKvg"}
,{"title":"smr s8A5L~@","start":1139,"end":1222,"src":"OJo-hcmsKvg"}
,{"title":"smr l5A2L+","start":2217,"end":2271,"src":"OJo-hcmsKvg"}
,{"title":"fra s8A2L+@","start":970,"end":996,"src":"OJo-hcmsKvg"}
,{"title":"fra 22D5R-","start":5273,"end":5295,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":5782,"end":5817,"title":"smr koA5L-"}
,{"title":"smr s8D5C+","start":448,"end":511,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":3186,"end":3211,"title":"smr s8D5C--"}
,{"title":"fra l7A2L-","start":5453,"end":5469,"src":"OJo-hcmsKvg"}
,{"title":"fra koA2R-","start":1336,"end":1376,"src":"OJo-hcmsKvg"}
,{"title":"fra koA5R--","start":403,"end":414,"src":"OJo-hcmsKvg"}
,{"title":"fra s8D5R+","start":5335,"end":5400,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":4311,"end":4328,"title":"fra l5A2L+d"}
,{"title":"smr l5A5L+","start":5079,"end":5142,"src":"OJo-hcmsKvg"}
,{"title":"fra s8A5C-","start":4968,"end":5002,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":3731,"end":3810,"title":"fra s8A2R+"}
,{"title":"smr s8D2R--","start":4348,"end":4407,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":3599,"end":3622,"title":"smr s8D2L--"}
,{"src":"OJo-hcmsKvg","start":4808,"end":4904,"title":"fra l5D5R+d"}
,{"src":"OJo-hcmsKvg","start":4731,"end":4748,"title":"smr s8A2L--"}
,{"title":"fra l6A5L+d","start":2598,"end":2627,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":4621,"end":4633,"title":"smr koA2L+"}
,{"src":"OJo-hcmsKvg","start":4481,"end":4508,"title":"fra l7A2L+d@"}
,{"src":"OJo-hcmsKvg","start":1805,"end":1887,"title":"smr l5D5L-"}
,{"title":"smr l5A5R+","start":207,"end":278,"src":"OJo-hcmsKvg"}
,{"title":"smr s8D2R--","start":931,"end":944,"src":"OJo-hcmsKvg"}
,{"title":"fra cpA5R-","start":2433,"end":2508,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":4073,"end":4161,"title":"fra 22D5R+"}
,{"src":"OJo-hcmsKvg","start":3932,"end":3961,"title":"smr l5A5L+"}
,{"src":"OJo-hcmsKvg","start":1770,"end":1786,"title":"fra l7A5R--"}
,{"title":"fra s8D5C+","start":2751,"end":2801,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":3907,"end":3921,"title":"fra l5D5R-"}
,{"src":"OJo-hcmsKvg","start":3858,"end":3887,"title":"fra l5A2R-"}
,{"title":"fra koA5R-","start":742,"end":803,"src":"OJo-hcmsKvg"}
,{"title":"fra l7A2L--","start":840,"end":854,"src":"OJo-hcmsKvg"}
,{"title":"fra s8D2L++","start":1554,"end":1602,"src":"OJo-hcmsKvg"}
,{"title":"smr koA2L--","start":2682,"end":2697,"src":"OJo-hcmsKvg"}
,{"title":"fra koA5R-","start":2379,"end":2415,"src":"OJo-hcmsKvg"}
,{"src":"OJo-hcmsKvg","start":4226,"end":4258,"title":"smr l5A5L+"}
];					
			
    function getJsonFromUrl() {
        var query = location.search.substr(1) + location.hash;
        var result = {};
        query.split(/&|#/).forEach(function(part) {
            var item = part.split("=");
            if (item.length < 2)
                return;
            result[item[0]] = decodeURIComponent(item[1]);
        });
        return result;
    }
	

!function($, e, o) {
    $(document).on("pagebeforechange", function(e, t) {
        if ("string" == typeof t.toPage) {
            console.log(t.toPage);
            var p = $.mobile.path.parseUrl(t.toPage);
            if ($.mobile.path.isEmbeddedPage(p)) {
                var h = {}; if(t.options.link) h=$.extend(h,t.options.link.context.dataset);
				var i = $.mobile.path.parseUrl(p.hash.replace(/^#/, ""));
                if (i.search) {
                    var r, n, s, l, g = (i.search || "").replace(/^\?/, "").split(/&/);
                    for (r = 0; r < g.length; r++) {
                        var f = g[r]; 
                        f && (n = f.split(/=/),
                        s = n[0],
                        l = n[1],
                        h[s] === o ? h[s] = l : ("object" != typeof h[s] && (h[s] = [h[s]]),
                        h[s].push(l)))
                    }
                    t.options.dataUrl || (t.options.dataUrl = t.toPage),
                    t.options.pageData = h,
                    t.toPage = p.hrefNoHash + "#" + i.pathname
                }
                //if anchor get data <a href="xxx" data-test="test!">....
                if( $(e.currentTarget.activeElement).attr("href") ) h=$.extend(h,$(e.currentTarget.activeElement).data());
                $.mobile.pageData = h; 
            }
        }
    })
}(jQuery, window);
$.mobile.document.on( "pagecreate","#p-home"  ,function(){
	var h=[];
	gjpList.forEach(function(e,i) {
		h.push('<li><a href="#p-video?i=',i,'">',e.title,'</a></li>');
	});
	$('#p-home-video-ul').empty().html( h.join('') ).listview('refresh');
	
});
$.mobile.document.on( "pagecreate","#p-video" ,function(){
	gplayer = videojs('my-video', { 
		 "techOrder":["html5","youtube"] 
		,"playbackRates": [0.5,1,4] 
		//,"plugins": { "resolutionSelector": { "default_res": "360" } } 
		}, function () {
			console.log('Good to go!');
			//this.play();
			
			this.on('ended', function () {
				console.log('prossimo video');
				gplayerId = ++gplayerId % (gjpList.length+1);
				vfLoad4List();
				
			});

		}).hotkeys({
				volumeStep: 0.1,
				seekStep: 5,
				alwaysCaptureHotkeys: true,
				enableJogStyle: true
			});	
		
/*		

	//https://codepen.io/onigetoc/pen/wJRyvZ
var Button = videojs.getComponent('Button');
// Extend default
var PrevButton = videojs.extend(Button, {
  //constructor: function(player, options) {
  constructor: function() {
    Button.apply(this, arguments);
    //this.addClass('vjs-chapters-button');
    this.addClass('icon-angle-left');
    this.controlText("Previous");
  },
  handleClick: function() {
    console.log('click');
    player.playlist.previous();
  }
});	
// Extend default
var NextButton = videojs.extend(Button, {
  //constructor: function(player, options) {
  constructor: function() {
    Button.apply(this, arguments);
    //this.addClass('vjs-chapters-button');
    this.addClass('icon-angle-right');
    this.controlText("Next");
  },
  handleClick: function() {
    console.log('click');
    player.playlist.next();
  }
});
// Register the new component
videojs.registerComponent('NextButton', NextButton);
videojs.registerComponent('PrevButton', PrevButton);
//player.getChild('controlBar').addChild('SharingButton', {});
player.getChild('controlBar').addChild('PrevButton', {}, 0);
player.getChild('controlBar').addChild('NextButton', {}, 2);
*/


});
// contatore gplayerId = ++gplayerId % (gjpList.length+1)
function vfLoad4List(){
	var e = gjpList[gplayerId];
	var s = e.src;

	if(!e.type) e.type = "video/youtube";
	if(!e.jump) e.jump = 0;
		
	if (e.type=="video/youtube") 
			s = "https//www.youtube.com/embed/"+s
	
	gplayer.src({type: e.type, src: s});
	//gplayer.load();
	 
	if(e.start && e.end)
		gplayer.offset({
			start: e.start,
			end: e.end,
			restart_beginning: false //Should the video go to the beginning when it ends
		});
	 else gplayer.currentTime(e.jump);
	 gplayer.play();
	
	//if($('button.vjs-big-play-button')) $('button.vjs-big-play-button').click();
	//else if($('button.vjs-play-control')) $('button.vjs-play-control').click();
}
$.mobile.document.on( "pageshow", "#p-video"  ,function(){ 
    if($.mobile.pageData.i) gplayerId = $.mobile.pageData.i;
	vfLoad4List();
	
});
$.mobile.document.on( "pagebeforehide", "#p-video", function(e,ui){  
	//var player = videojs('my-video');
	gplayer.pause();
});


</script>
<style>
/* https://stackoverflow.com/questions/10790453/videojs-with-jquery-mobile-transitions
**/
.ui-page {
        -webkit-backface-visibility: hidden;
}
.video-js {
    height: auto;
}
.video-holder,
.video-holder * {
  box-sizing: border-box !important
}

.video-holder {
  background: #1b1b1b;
  padding: 10px
}

.centered {
  width: 100%
}

#video {
  border-radius: 8px
}

.video-holder .vjs-big-play-button {
  left: 50%;
  width: 100px;
  margin-left: -50px;
  height: 80px;
  top: 50%;
  margin-top: -40px
}


/* CUSTOM BUTTONS */
[class^="icon-"]:before,
[class*=" icon-"]:before {
  font-family: FontAwesome;
  font-weight: normal;
  font-style: normal;
  display: inline-block;
  text-decoration: inherit;
}
.icon-angle-left:before {
    content: "\f104";
}
.icon-angle-right:before {
    content: "\f105";
}

.video-js .icon-angle-right, .video-js .icon-angle-left {
    cursor: pointer;
    -webkit-box-flex: none;
    -moz-box-flex: none;
    -webkit-flex: none;
    -ms-flex: none;
    flex: none;
}

</style>
</head> 
<body> 


<div id="p-home" data-role="page" data-theme="a">
	<div data-role="header" data-position="fixed" >
		<h1>videojs</h1>
	</div>  <!-- /header -->
	<div data-role ="content" >	
		<ul data-role="listview" id="p-home-video-ul">
		</ul>		
	</div>  <!-- /content -->
</div>  <!-- /page home -->
<div id="p-video" data-role="page" data-theme="a">
	<div data-role="header" >
        <a href="#p-home" data-corners="true" data-icon="back" data-direction="reverse" >Back</a>
		<h1>video</h1>
   	</div>  <!-- /header -->
	<div data-role="content" style="padding: 0px;">  
		<video id="my-video" 
		controls preload="auto" poster="rugbyassistant.png"
		class="video-js vjs-default-skin vjs-16-9 vjs-big-play-centered">
		</video>
    </div>  <!-- /content -->
</div>  <!-- /page --> 





</body></html>
